// Products section styles
// Adapted from erco-theme (rem converted to px)

.products {
	position: relative;
	height: 100vh;

	&.page-section {
		margin-bottom: 60px;
	}

	&__title {
		font-family: var(--font-family);
		font-weight: 500;
		font-size: 48px;
		line-height: 1.2;
		margin-bottom: 40px;

		@include mobile {
			font-size: 32px;
			margin-bottom: 20px;
		}
	}

	&__content {
		width: 100%;
		height: 100%;
		position: relative;
		padding: 40px 0;
		background: #f5f5f7;
		display: flex;
		align-items: center;
	}

	&__container {
		position: relative;
		gap: 60px;
	}

	// Product categories
	&__categories {
		display: flex;
		flex-direction: column;
		gap: 6px;
		position: absolute;
		z-index: 1000;
		top: 0;
		left: 20px;

		@include tablet {
			left: 20px;
		}
		@include mobile {
			gap: 4px;
			width: auto;
			overflow-x: auto;
			overflow-y: hidden;
			flex-direction: row;
			align-items: center;
			right: 0;
			scroll-behavior: smooth;
			-webkit-overflow-scrolling: touch;
			scroll-snap-type: x mandatory;
			scrollbar-width: none;
			-ms-overflow-style: none;
			position: relative;
			
			&::-webkit-scrollbar {
				display: none;
			}
		}
	}

	&__category {
		position: relative;
		display: flex;
		align-items: center;
		gap: 8px;
		background: transparent;
		border: none;
		cursor: pointer;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		text-align: left;
		outline: none;

		&:hover {
			.products__category-text {
				color: #233FA1;
				transform: translateX(4px);
			}
		}

		&.active {
			.products__category-dot {
				opacity: 1;
				background: #233FA1;
				transform: scale(1.2);
			}

			.products__category-text {
				font-family: var(--font-family);
				font-weight: 700;
				font-size: 32px;
				line-height: 1.219;
				letter-spacing: 0.03em;
				text-transform: uppercase;
				color: #233FA1;
				transform: translateX(0);

				@include mobile {
					font-size: 14px;
				}
			}

			.products__category-number {
				color: #233FA1;
				opacity: 1;
				font-weight: 600;
				font-size: 16px;

				@include mobile {
					display: none;
				}
			}
		}

		@include mobile {
			padding: 10px 12px;
			width: fit-content;
			flex-shrink: 0;
			scroll-snap-align: start;
			scroll-snap-stop: always;
			border: 1px solid var(--grey-back);
			border-radius: 20px;
			background: var(--white-100, #fff);

			&.active {
				background: #233FA1;

				.products__category-text {
					color: #fff;
					text-transform: none;
				}
			}
		}
	}

	&__category-dot {
		width: 8px;
		height: 8px;
		border-radius: 50%;
		background: transparent;
		opacity: 0;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		flex-shrink: 0;

		@include mobile {
			display: none;
		}
	}

	&__category-text {
		position: relative;
		display: inline-block;
		font-family: var(--font-family);
		font-weight: 500;
		font-size: 16px;
		line-height: 1.25;
		letter-spacing: 0.03em;
		text-transform: uppercase;
		color: var(--dark-100);
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		will-change: transform, color, font-size;

		@include mobile {
			font-size: 14px;
			font-weight: 400;
			text-transform: none;
		}
	}

	&__category-number {
		position: absolute;
		top: -5px;
		right: -35px;
		font-family: var(--font-family);
		font-weight: 500;
		font-size: 16px;
		line-height: 1;
		letter-spacing: 0.03em;
		color: var(--dark-100);
		opacity: 0.5;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		pointer-events: none;
		white-space: nowrap;

		@include mobile {
			display: none;
		}
	}

	// Animation container
	&__animation {
		position: relative;
		width: 100%;
		height: 100vh;
		max-height: 800px;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden;

		@include tablet {
			height: 600px;
			max-height: 600px;
		}

		@include mobile {
			height: 450px;
			max-height: 450px;
			border-radius: 6px;
		}
	}

	&__canvas {
		width: 100%;
		max-width: 100%;
		max-height: 100%;
		object-fit: contain;
		position: relative;
		z-index: 1;
	}

	// Spline wrapper (tablet only)
	&__spline-wrapper {
		display: none;
		position: absolute;
		inset: 0;
		z-index: 10;
		background: #f5f5f7;
		border-radius: 6px;
		overflow: hidden;
		pointer-events: none;

		#spline3d {
			width: 100%;
			height: 100%;
			display: block;
			touch-action: pan-y;
			outline: none;
			pointer-events: auto;
		}
	}

	&__spline-hotspots {
		position: absolute;
		inset: 0;
		pointer-events: none;
		z-index: 15;
	}

	&__spline-hotspot {
		position: absolute;
		width: 26px;
		height: 27px;
		background: #233FA1;
		border-radius: 20px;
		display: flex;
		align-items: center;
		justify-content: center;
		transform: translate(-50%, -50%);
		cursor: pointer;
		pointer-events: auto;
		transition: transform 0.2s ease, box-shadow 0.2s ease;
		box-shadow: 0px 0px 20px 0px rgba(35, 63, 161, 1);

		&:hover {
			transform: translate(-50%, -50%) scale(1.1);
			box-shadow: 0px 0px 25px 0px rgba(35, 63, 161, 1);
		}

		&:active {
			transform: translate(-50%, -50%) scale(0.95);
		}

		svg {
			width: 20px;
			height: 20px;
		}
	}

	&__spline-360 {
		position: absolute;
		left: 50%;
		bottom: 18px;
		transform: translateX(-50%);
		z-index: 20;
		color: #233FA1;
		pointer-events: none;
		opacity: 0.95;
		filter: drop-shadow(0 3px 10px rgba(0, 0, 0, 0.25));

		svg {
			width: 84px;
			height: 84px;
			display: block;
		}

		path {
			fill: currentColor !important;
		}
	}

	&__spline-loader {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 12px;
		z-index: 5;
		pointer-events: none;
	}

	&__spline-spinner {
		width: 40px;
		height: 40px;
		border: 3px solid rgba(35, 63, 161, 0.2);
		border-top-color: #233FA1;
		border-radius: 50%;
		animation: products-spin 0.8s linear infinite;
	}

	&__spline-loader-text {
		font-family: var(--font-family);
		font-size: 14px;
		color: #6b7280;
	}

	// Description block
	&__description {
		position: absolute;
		top: 125px;
		right: 0;
		width: 357px;
		max-width: 100%;
		opacity: 0;
		visibility: hidden;
		transform: translateY(-20px);
		transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
		z-index: 100;
		pointer-events: none;
		// background: rgba(255, 255, 255, 0.98);
		border-radius: 12px;
		padding: 20px;
		// box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);

		&.visible {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
			pointer-events: auto;
		}

		&[data-position="bottom-left"] {
			top: auto;
			right: auto;
			bottom: 270px;
			left: 0;
		}

		@include mobile {
			position: absolute;
			top: calc(450px + 20px);
			left: 50%;
			right: auto;
			width: min(357px, calc(100% - 40px));
			max-width: calc(100% - 40px);
			margin: 0;
			padding: 16px;
			background: rgba(255, 255, 255, 0.96);
			border: 1px solid var(--grey-back);
			border-radius: 12px;
			box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
			transform: translateX(-50%) translateY(10px);
			z-index: 2000;

			&[data-position="bottom-left"] {
				top: calc(450px + 20px);
				bottom: auto;
				left: 50%;
				right: auto;
			}

			&.visible {
				transform: translateX(-50%) translateY(0);
			}
		}
	}

	&__description-badge {
		display: flex;
		width: 26px;
		height: 27px;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		border-radius: 20px;
		background: #333;
		box-shadow: 0 0 20px 0 #233FA1;
		color: #FFF;
		font-family: var(--font-family);
		font-size: 16px;
		font-weight: 400;
		margin-bottom: 12px;
	}

	&__description-title {
		font-family: var(--font-family);
		font-weight: 500;
		font-size: 48px;
		line-height: 1.219;
		letter-spacing: -0.005em;
		color: var(--dark-100);
		margin: 0 0 12px 0;
		white-space: nowrap;
		text-transform: capitalize;

		@include mobile {
			font-size: 32px;
		}
	}

	&__description-text {
		font-family: var(--font-family);
		font-weight: 400;
		font-size: 16px;
		line-height: 1.366;
		letter-spacing: 0.03em;
		color: var(--dark-100);
		margin: 0;
		padding: 0;
		list-style: none;

		li {
			position: relative;
			padding-left: 20px;
			margin-bottom: 8px;

			&::before {
				content: 'â€¢';
				position: absolute;
				left: 0;
			}

			&:last-child {
				margin-bottom: 0;
			}
		}

		@include mobile {
			font-size: 14px;
		}
	}

	// Skip button
	&__skip-btn {
		position: fixed;
		bottom: 20px;
		left: 50%;
		transform: translateX(-50%) translateY(100px);
		z-index: 10000;
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 8px;
		padding: 4px 20px;
		height: 60px;
		background: var(--dark-100);
		border: 1px solid var(--dark-100);
		border-radius: 40px;
		cursor: pointer;
		opacity: 0;
		visibility: hidden;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		font-family: var(--font-family);
		font-weight: 500;
		font-size: 16px;
		line-height: 1.219;
		letter-spacing: 0.03em;
		text-transform: uppercase;
		color: #fff;
		outline: none;

		&:hover {
			background: #2A2A2A;
			border-color: #2A2A2A;
		}

		&.visible {
			opacity: 1;
			visibility: visible;
			transform: translateX(-50%) translateY(0);
		}

		@include mobile {
			bottom: 20px;
			padding: 4px 16px;
			height: 50px;
			font-size: 14px;
			gap: 6px;
		}
	}

	// Read More CTA
	&__cta {
		width: fit-content;
		position: absolute;
		top: 0;
		right: 0;
		z-index: 12;

		@include mobile {
			display: none !important;
		}
	}

	&__read-more {
		display: flex;
		align-items: center;
		gap: 12px;
		padding: 12px 20px;
		background: #233FA1;
		border-radius: 30px;
		color: #fff;
		text-decoration: none;
		font-family: var(--font-family);
		font-weight: 500;
		font-size: 14px;
		text-transform: uppercase;
		transition: all 0.3s ease;

		&:hover {
			background: #1a2f7a;
		}

		p {
			margin: 0;
		}

		div {
			display: flex;
			align-items: center;
			justify-content: center;
			width: 32px;
			height: 32px;
			background: rgba(255, 255, 255, 0.2);
			border-radius: 50%;
		}
	}

	// Tablet: show Spline for Uniguide
	@media (max-width: 1024px) {
		height: auto;
		&[data-active-animation="Uniguide"] .products__spline-wrapper {
			display: block;
		}

		&[data-active-animation="Uniguide"] .products__canvas {
			display: none !important;
		}

		&[data-active-animation="Uniguide"] .products__skip-btn {
			display: none !important;
		}
	}
}

@keyframes products-spin {
	to {
		transform: rotate(360deg);
	}
}
